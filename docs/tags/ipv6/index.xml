<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>IPv6 on 新泽雪冬</title>
        <link>https://blog.zooter.com.cn/tags/ipv6/</link>
        <description>Recent content in IPv6 on 新泽雪冬</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sun, 13 Mar 2022 18:44:42 -0700</lastBuildDate><atom:link href="https://blog.zooter.com.cn/tags/ipv6/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>IPv6LAN侧动态寻址</title>
        <link>https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/</link>
        <pubDate>Sun, 13 Mar 2022 18:44:42 -0700</pubDate>
        
        <guid>https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/</guid>
        <description>&lt;h1 id=&#34;一ipv6动态寻址&#34;&gt;一、IPv6动态寻址&lt;/h1&gt;
&lt;p&gt;IPv6动态寻址有三种方式：无状态地址自动配置(SLAAC)、无状态DHCPv6、有状态DHCPv6。&lt;/p&gt;
&lt;p&gt;其中有无状态是指IP地址能否被统一管理，例如：有状态DHCPv6指IP地址由DHCPv6服务器分配，网络管理员能通过DHCPv6服务对IP地址进行统一管理。&lt;/p&gt;
&lt;h1 id=&#34;二rars消息&#34;&gt;二、RA/RS消息&lt;/h1&gt;
&lt;p&gt;RA/RS分别是路由通告消息和路由请求消息的缩写，这两个消息类型是ICMPv6邻居发现协议定义的。&lt;/p&gt;
&lt;h2 id=&#34;21-ra路由通告消息&#34;&gt;2.1 RA路由通告消息&lt;/h2&gt;
&lt;p&gt;RA消息由IPv6路由器向多播地址&lt;code&gt;ff02::1&lt;/code&gt;发送，目的是宣布自身存在以及向消息发送接口所连链路有关的IPv6地址信息和配置参数，如：链路的IPv6前缀、前缀长度、默认网关的地址、链路最大传输单元(MTU)。&lt;/p&gt;
&lt;p&gt;通常的IPv6路由器会定时向链路发送路由通告消息，如果收到设备发送的RS消息，也会立即发送RA消息。&lt;/p&gt;
&lt;h3 id=&#34;211-aom标志位&#34;&gt;2.1.1 A、O、M标志位&lt;/h3&gt;
&lt;p&gt;RA消息中可携带三种标志位，向IPv6设备建议如何创建或获取地址。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A标志位（地址自动配置标记）&lt;/p&gt;
&lt;p&gt;该标志位出现在RA消息的Option中的Prefix Information里。当该标志位打开(置1)时，表示建议主机采用SLAAC方式来创建地址，采用RA消息中的前缀加上接口ID生成地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O标志位（其他配置标记）&lt;/p&gt;
&lt;p&gt;该标志位出现在RA消息主体里。当该标志位打开(置1)时，表示建议主机采用SLAAC方式来创建地址，通过DHCPv6服务器获取除地址以外的其他地址信息，如：DNS服务器的IP地址和域名。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;M标志位（管理地址配置标记）&lt;/p&gt;
&lt;p&gt;该标志位出现在RA消息主体里。当该标志位打开(置1)时，表示建议主机从DHCPv6服务器获取地址及所有其他地址信息，只从RA消息中获取IPv6网关地址。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;M&lt;/th&gt;
&lt;th&gt;O&lt;/th&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;IP地址&lt;/th&gt;
&lt;th&gt;其他配置&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;静态设置&lt;/td&gt;
&lt;td&gt;手工配置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;前缀由 RA 指定，自动生成&lt;/td&gt;
&lt;td&gt;手工配置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;静态设置&lt;/td&gt;
&lt;td&gt;DHCPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;前缀由 RA 指定，自动生成&lt;/td&gt;
&lt;td&gt;DHCPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;有状态 DHCPv6&lt;/td&gt;
&lt;td&gt;DHCPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;有状态 DHCPv6 和/或 自动生成&lt;/td&gt;
&lt;td&gt;DHCPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;有状态 DHCPv6&lt;/td&gt;
&lt;td&gt;DHCPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;有状态 DHCPv6 和/或 自动生成&lt;/td&gt;
&lt;td&gt;DHCPv6&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;22-rs路由恳求消息&#34;&gt;2.2 RS路由恳求消息&lt;/h2&gt;
&lt;p&gt;RS消息由IPv6设备向多播地址&lt;code&gt;ff02::2&lt;/code&gt;发送，源地址是设备的本地链路地址(LLA)或IPv6未指定地址(::)，目的是向IPv6路由器请求链路地址相关的信息。&lt;/p&gt;
&lt;h1 id=&#34;三无状态地址自动配置slaac&#34;&gt;三、无状态地址自动配置(SLAAC)&lt;/h1&gt;
&lt;p&gt;以下是SLAAC配置地址的流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;客户端接口启动成功后，向&lt;code&gt;ff02::2&lt;/code&gt;发送RS消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/a5a6a5ca9cade2a6f35faee3e1a6f58c.png&#34;
	width=&#34;992&#34;
	height=&#34;350&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/a5a6a5ca9cade2a6f35faee3e1a6f58c_hu26f54fe95ce16dbd63901882cc0bf7aa_27359_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/a5a6a5ca9cade2a6f35faee3e1a6f58c_hu26f54fe95ce16dbd63901882cc0bf7aa_27359_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;SLAAC-RS消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;283&#34;
		data-flex-basis=&#34;680px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;源地址为客户端的本地链路地址(LLA)，目的地址是代表所有IPv6路由器的多播地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IPv6路由器接收到RS消息后，立即向&lt;code&gt;ff02::1&lt;/code&gt;或客户端LLA发送RA消息。&lt;/p&gt;
&lt;p&gt;因为采用SLAAC自动生成地址，所以RA消息中的A标志位置1，O和M标志位置0。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/2be01e8055cd0a13abc0bef4a00854e2.png&#34;
	width=&#34;992&#34;
	height=&#34;947&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/2be01e8055cd0a13abc0bef4a00854e2_hu0af857552c873684d0c99238472d2b6a_72747_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/2be01e8055cd0a13abc0bef4a00854e2_hu0af857552c873684d0c99238472d2b6a_72747_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;SLAAC-RA消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;104&#34;
		data-flex-basis=&#34;251px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;源地址为IPv6路由器的本地链路地址，目的地址是客户端的本地链路地址，M标志位为0，O标志位为1（M20-8G和AC5客供软件在设置为SLAAC模式后，RA消息中O标志位都置为1，暂不清楚原因）。&lt;/p&gt;
&lt;p&gt;在选项中可以看到：A标志位为1，表示建议客户端自动生成地址；当前链路的MTU位1500；DNS服务器为&lt;code&gt;fc00::ac6:b3ff:feb9:689d&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端使用RA报文中的前缀和接口ID生成IP地址。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/579ecbd1919d2e8e225aa1c40984009d.png&#34;
	width=&#34;411&#34;
	height=&#34;546&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/579ecbd1919d2e8e225aa1c40984009d_huc586770b73f51e24d9657a54ecca7afc_30432_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/579ecbd1919d2e8e225aa1c40984009d_huc586770b73f51e24d9657a54ecca7afc_30432_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;SLAAC-网卡信息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;75&#34;
		data-flex-basis=&#34;180px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;四无状态dhcpv6&#34;&gt;四、无状态DHCPv6&lt;/h1&gt;
&lt;p&gt;无状态DHCPv6的地址配置过程与SLAAC类似，但增加了与DHCP服务器交互的过程。以下是无状态DHCPv6配置地址的流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;客户端接口启动成功后，向&lt;code&gt;ff02::2&lt;/code&gt;发送RS消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/a5a6a5ca9cade2a6f35faee3e1a6f58c.png&#34;
	width=&#34;992&#34;
	height=&#34;350&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/a5a6a5ca9cade2a6f35faee3e1a6f58c_hu26f54fe95ce16dbd63901882cc0bf7aa_27359_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/a5a6a5ca9cade2a6f35faee3e1a6f58c_hu26f54fe95ce16dbd63901882cc0bf7aa_27359_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-RS报文&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;283&#34;
		data-flex-basis=&#34;680px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;源地址为客户端的本地链路地址(LLA)，目的地址是代表所有IPv6路由器的多播地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IPv6路由器接收到RS消息后，立即向&lt;code&gt;ff02::1&lt;/code&gt;或客户端LLA发送RA消息。&lt;/p&gt;
&lt;p&gt;因为采用SLAAC自动生成地址，所以RA消息中的A和O标志位置1，M标志位置0。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/0fd6a51e063c193829bc75fe6bc923ea.png&#34;
	width=&#34;991&#34;
	height=&#34;728&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/0fd6a51e063c193829bc75fe6bc923ea_hu9412e8484b0f58927fd009f74abeaab1_60150_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/0fd6a51e063c193829bc75fe6bc923ea_hu9412e8484b0f58927fd009f74abeaab1_60150_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-RA报文&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;136&#34;
		data-flex-basis=&#34;326px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;源地址为IPv6路由器的本地链路地址，目的地址是代表所有IPv6客户端的多播地址，M标志位为0，O标志位为1。&lt;/p&gt;
&lt;p&gt;在选项中可以看到：A标志位为1，表示建议客户端自动生成地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端使用RA报文中的前缀和接口ID生成IP地址。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/483ccb9bd9fb0062c509bd42d52a40d8.png&#34;
	width=&#34;403&#34;
	height=&#34;457&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/483ccb9bd9fb0062c509bd42d52a40d8_hu575ad9a516d35952f6d6bce167b4710b_25928_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/483ccb9bd9fb0062c509bd42d52a40d8_hu575ad9a516d35952f6d6bce167b4710b_25928_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-网卡信息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;88&#34;
		data-flex-basis=&#34;211px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端发送DHCPv6恳求消息寻找DHCPv6服务器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/3c8cda5a02605ce905568d06d2be4aa7.png&#34;
	width=&#34;992&#34;
	height=&#34;857&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/3c8cda5a02605ce905568d06d2be4aa7_hu0ef1e168e22ffac60aa7bd350e27dd63_64876_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/3c8cda5a02605ce905568d06d2be4aa7_hu0ef1e168e22ffac60aa7bd350e27dd63_64876_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-DHCPv6恳求消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;115&#34;
		data-flex-basis=&#34;277px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;源地址为客户端本地链路地址，目的地址为代表所有DHCPv6服务器和中继服务器的多播地址&lt;code&gt;ff02::1:2&lt;/code&gt;，目的是定位DHCPv6服务器。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DHCPv6服务器回应请求，发送DHCPv6通告消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/81d575439e67f78ab1104aafe627948c.png&#34;
	width=&#34;940&#34;
	height=&#34;548&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/81d575439e67f78ab1104aafe627948c_hu4b8273fbb24dbbfa91be048bef06bc4a_44139_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/81d575439e67f78ab1104aafe627948c_hu4b8273fbb24dbbfa91be048bef06bc4a_44139_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-DHCPv6通告消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;171&#34;
		data-flex-basis=&#34;411px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;DHCPv6服务器发送通告消息，源地址是DHCPv6服务器本地链路地址，目的地址是客户端的本地链路地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端发送DHCPv6信息请求消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/48da0b9401daa245c0ca519e5d0b4447.png&#34;
	width=&#34;940&#34;
	height=&#34;627&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/48da0b9401daa245c0ca519e5d0b4447_hu7e0f64de41ab31358e16aaa36d4bf30d_49120_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/48da0b9401daa245c0ca519e5d0b4447_hu7e0f64de41ab31358e16aaa36d4bf30d_49120_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-DHCPv6信息请求消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;客户端再发送信息请求消息，请求从DHCPv6服务器获取地址参数（不是地址）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DHCPv6服务器回应请求，发送DHCPv6应答消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/e72d788e18723fc6a0d48ecc77185e97.png&#34;
	width=&#34;941&#34;
	height=&#34;635&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/e72d788e18723fc6a0d48ecc77185e97_hu8dc1ca501aae586cf2d13023df0caeb6_48909_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/e72d788e18723fc6a0d48ecc77185e97_hu8dc1ca501aae586cf2d13023df0caeb6_48909_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;无状态DHCPv6-DHCPv6应答消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;148&#34;
		data-flex-basis=&#34;355px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;DHCPv6服务器发送应答消息，其中包含地址参数，如图：DNS服务器地址。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;五有状态dhcpv6&#34;&gt;五、有状态DHCPv6&lt;/h1&gt;
&lt;p&gt;有状态DHCPv6地址分配方式即除了IPv6网关信息外，其他所有地址信息都从DHCPv6服务器获取，以下是有状态DHCPv6配置地址的流程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;客户端接口启动成功后，向&lt;code&gt;ff02::2&lt;/code&gt;发送RS消息。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/3b29200260366fd33d2f86cb355f1559.png&#34;
	width=&#34;938&#34;
	height=&#34;191&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/3b29200260366fd33d2f86cb355f1559_huaa5d6eb0153c023c5122d797adc1bb42_18201_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/3b29200260366fd33d2f86cb355f1559_huaa5d6eb0153c023c5122d797adc1bb42_18201_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;有状态DHCPv6-RS消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;491&#34;
		data-flex-basis=&#34;1178px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;源地址是客户端本地链路地址，目的地址是&lt;code&gt;ff02::2&lt;/code&gt;所有IPv6路由器。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;IPv6路由器接收到RS消息后，立即向&lt;code&gt;ff02::1&lt;/code&gt;或客户端LLA发送RA消息。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/6ba2de6aadb6212109a977f3122b89de.png&#34;
	width=&#34;939&#34;
	height=&#34;946&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/6ba2de6aadb6212109a977f3122b89de_hu2afaaabf1a7f7d50c617529bf18c3620_71101_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/6ba2de6aadb6212109a977f3122b89de_hu2afaaabf1a7f7d50c617529bf18c3620_71101_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;有状态DHCPv6-RA消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;99&#34;
		data-flex-basis=&#34;238px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;由于是有状态DHCPv6，A标志位置0，O和M标志位置1。表示建议客户端从DHCPv6服务器获取地址和地址配置。&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;客户端使用RA报文中的IPv6网关地址。&lt;/p&gt;
&lt;p&gt;客户端从RA报文中只采用IPv6网关地址，其他信息从DHCPv6服务器获取。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端发送DHCPv6恳求消息寻找DHCPv6服务器。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/6ec14e58818a0a85eb034437287360c8.png&#34;
	width=&#34;942&#34;
	height=&#34;850&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/6ec14e58818a0a85eb034437287360c8_hu1603211c946f9fd64138eea5dd8dd2ac_64181_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/6ec14e58818a0a85eb034437287360c8_hu1603211c946f9fd64138eea5dd8dd2ac_64181_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;有状态DHCPv6-DHCPv6恳求消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;110&#34;
		data-flex-basis=&#34;265px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ff02::1:2&lt;/code&gt;表示所有DHCPv6服务器和中继服务器。&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;DHCPv6服务器回应请求，发送DHCPv6通告消息。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/28d7ea4b78ee9340f558e1619564b0e2.png&#34;
	width=&#34;941&#34;
	height=&#34;947&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/28d7ea4b78ee9340f558e1619564b0e2_hu8c0c7a4e7145d570c5c023c59f021882_64042_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/28d7ea4b78ee9340f558e1619564b0e2_hu8c0c7a4e7145d570c5c023c59f021882_64042_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;有状态DHCPv6-DHCPv6通告消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;99&#34;
		data-flex-basis=&#34;238px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;客户端发送DHCPv6信息请求消息。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/2144b16db821876f67c3dcf3a8e4c1cb.png&#34;
	width=&#34;943&#34;
	height=&#34;791&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/2144b16db821876f67c3dcf3a8e4c1cb_huc83268fb950ca5a817cc99593e187b0d_58898_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/2144b16db821876f67c3dcf3a8e4c1cb_huc83268fb950ca5a817cc99593e187b0d_58898_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;有状态DHCPv6-DHCPv6信息请求消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;119&#34;
		data-flex-basis=&#34;286px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;
&lt;p&gt;DHCPv6服务器回应请求，发送DHCPv6应答消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/d82033bfdcf38faa6cac8a56f86515f1.png&#34;
	width=&#34;938&#34;
	height=&#34;732&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/d82033bfdcf38faa6cac8a56f86515f1_hufce51c50c22e09630c2b027aba98a310_52413_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/d82033bfdcf38faa6cac8a56f86515f1_hufce51c50c22e09630c2b027aba98a310_52413_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;有状态DHCPv6-DHCPv6应答消息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;128&#34;
		data-flex-basis=&#34;307px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在回应消息中，DHCPv6服务器提供了IP地址及其他的配置信息，如图：DNS服务器地址&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/698b82a7413ac5b30def26ea5f6bfa76.png&#34;
	width=&#34;1512&#34;
	height=&#34;576&#34;
	srcset=&#34;https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/698b82a7413ac5b30def26ea5f6bfa76_hud24e86463095b0903bbb481bff9d0b62_146333_480x0_resize_box_3.png 480w, https://blog.zooter.com.cn/posts/ipv6lan%E4%BE%A7%E5%8A%A8%E6%80%81%E5%AF%BB%E5%9D%80/698b82a7413ac5b30def26ea5f6bfa76_hud24e86463095b0903bbb481bff9d0b62_146333_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;不同操作系统寻址方式支持列表&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;262&#34;
		data-flex-basis=&#34;630px&#34;
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.packetmania.net/2020/12/01/IPv6-Addressing/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;IPv6动态地址分配机制详解&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://cshihong.github.io/2018/02/01/DHCPv6%E5%9F%BA%E7%A1%80/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DHCPv6基础&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        
    </channel>
</rss>
